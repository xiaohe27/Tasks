<!DOCTYPE html>
<!-- saved from url=(0048)https://searchcode.com/codesearch/view/28108492/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Problem5-DoubleEndedQueue.dfy in dafny located at /Test/VSComp2010">
    <link rel="shortcut icon" href="https://searchcode.com/static/favicon.ico" type="image/x-icon">
    <title>Problem5-DoubleEndedQueue.dfy in dafny | source code search engine</title>
    <link href="https://searchcode.com/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://searchcode.com/static/7.css" rel="stylesheet">
    <link href="https://searchcode.com/static/jquery.nouislider.css" rel="stylesheet">
    <script type="text/javascript" async="" src="./Problem5-DoubleEndedQueue.dfy in dafny _ source code search engine_files/ga.js"></script><script src="./Problem5-DoubleEndedQueue.dfy in dafny _ source code search engine_files/jquery-1.11.1.min.js"></script>
    <script src="./Problem5-DoubleEndedQueue.dfy in dafny _ source code search engine_files/11.js"></script>
    <script src="./Problem5-DoubleEndedQueue.dfy in dafny _ source code search engine_files/jquery.nouislider.min.js"></script>
    <script src="./Problem5-DoubleEndedQueue.dfy in dafny _ source code search engine_files/bootstrap.min.js"></script>
    <script src="./Problem5-DoubleEndedQueue.dfy in dafny _ source code search engine_files/typeahead.bundle.min.js"></script>
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    <link rel="search" type="application/opensearchdescription+xml" title="searchcode" href="https://addons.mozilla.org/firefox/downloads/latest/570226/addon-570226-latest.xml">
  </head>

  <body>
    
    <nav class="navbar navbar-default" role="navigation">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="https://searchcode.com/"><img src="./Problem5-DoubleEndedQueue.dfy in dafny _ source code search engine_files/searchcode_logo.png" width="120px;"></a>
      </div>
    

    <form class="navbar-form navbar-left" role="search" id="top-search" action="https://searchcode.com/">
     <div class="input-group">
        <input name="q" type="text" class="form-control" placeholder="Type a code snippet or function" value="">
        <span class="input-group-btn">
          <button type="submit" class="btn btn-primary">search</button>
        </span>
      </div>
    </form>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
              <li><a href="https://searchcode.com/spdx/">SPDX</a></li>
              <li><a href="https://searchcode.com/api/">API</a></li>
              <li><a href="https://searchcode.com/about/">About</a></li>
              <li><a href="https://searchcode.com/privacy/">Privacy</a></li>
        </ul>
      </div>
    </nav>
    
    
    <div class="container">
    
    
    
    <div class="row">
      

      <div class="panel panel-default">
        <div class="panel-heading">
          <a href="https://searchcode.com/codesearch/raw/28108492" rel="nofollow">
            <button type="button" class="btn btn-default btn-xs right">
              <span class="glyphicon glyphicon-align-left"></span> View Raw File
            </button>
          </a>
          
          
          
          <a href="https://searchcode.com/codesearch/view/28108492/#" rel="nofollow" id="file-tree-link" class="">
            <button type="button" class="btn btn-default btn-xs right">
              <span class="glyphicon glyphicon-tree-conifer"></span> <span id="file-tree-button" data-id="126540">View File Tree</span>
            </button>
          </a>
          <a href="https://searchcode.com/codesearch/view/28108492/#" rel="nofollow" id="view-similar-link" class="hidden">
            <button type="button" class="btn btn-default btn-xs right">
              <span class="glyphicon glyphicon-retweet"></span> <span id="similar-files" data-id="28108492">Find Similar Files</span>
            </button>
          </a>
          <h3 class="panel-title"><a href="https://hg.codeplex.com/dafny">
            
            <img src="./Problem5-DoubleEndedQueue.dfy in dafny _ source code search engine_files/microsoftaccount-24-black.png">
             dafny</a> /Test/VSComp2010/Problem5-DoubleEndedQueue.dfy</h3>
        </div>
        <div class="panel-body">
          hg https://hg.codeplex.com/dafny
        </div>
        <table class="table">
          <tbody><tr>
            <td>Language</td>
            <td>Unknown</td>
            <td>Code Lines</td>
            <td>0</td>
          </tr>
          <tr>
            <td>MD5 Hash</td>
            <td>beb6f15cfb6249e15bd16f17d1a4fdd9</td>
            <td>Comment Lines</td>
            <td>0</td>
          </tr>
          <tr>
            
              <td></td>
              <td></td>
            
            <td>Blank Lines</td>
            <td>0</td>
          </tr>
          <tr id="related-results">
            <td id="related-results-list" colspan="4"></td>
          </tr>
          
        </tbody></table>
      </div>
    </div>
    <div class="row">
      <div class="col-md-4" id="file-tree">
        <div id="file-tree-list">
        </div>
      </div>
      <div class="col-md-8">
        <table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163</pre></div></td><td class="code"><div class="highlight"><pre><a name="l-1"></a><span class="c1">// VSComp 2010, problem 5, double-ended queue.</span>
<a name="l-2"></a><span class="c1">// Rustan Leino, 18 August 2010.</span>
<a name="l-3"></a><span class="c1">//</span>
<a name="l-4"></a><span class="c1">// This program employs the standard Valid()/Repr idiom used in the dynamic-frames</span>
<a name="l-5"></a><span class="c1">// style of specifications, see for example the comment in Problem3-FindZero.dfy.</span>
<a name="l-6"></a><span class="c1">// Within that idiom, the specification is straightforward (if verbose), and there</span>
<a name="l-7"></a><span class="c1">// are no particular wrinkles or annoyances in getting the verifier to prove the</span>
<a name="l-8"></a><span class="c1">// correctness.</span>
<a name="l-9"></a>
<a name="l-10"></a><span class="k">class</span> <span class="n">AmortizedQueue</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="p">{</span>
<a name="l-11"></a>  <span class="c1">// The front of the queue.</span>
<a name="l-12"></a>  <span class="k">var</span> <span class="nl">front:</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">;</span>
<a name="l-13"></a>  <span class="c1">// The rear of the queue (stored in reversed order).</span>
<a name="l-14"></a>  <span class="k">var</span> <span class="nl">rear:</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">;</span>
<a name="l-15"></a>
<a name="l-16"></a>  <span class="n">ghost</span> <span class="k">var</span> <span class="nl">Repr:</span> <span class="n">set</span><span class="o">&lt;</span><span class="n">object</span><span class="o">&gt;</span><span class="p">;</span>
<a name="l-17"></a>  <span class="n">ghost</span> <span class="k">var</span> <span class="nl">List:</span> <span class="n">seq</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">;</span>
<a name="l-18"></a>
<a name="l-19"></a>  <span class="k">function</span> <span class="n">Valid</span><span class="p">()</span><span class="o">:</span> <span class="n">bool</span>
<a name="l-20"></a>    <span class="n">reads</span> <span class="k">this</span><span class="p">,</span> <span class="n">Repr</span><span class="p">;</span>
<a name="l-21"></a>  <span class="p">{</span>
<a name="l-22"></a>    <span class="k">this</span> <span class="n">in</span> <span class="n">Repr</span> <span class="o">&amp;&amp;</span>
<a name="l-23"></a>    <span class="n">front</span> <span class="o">!=</span> <span class="k">null</span> <span class="o">&amp;&amp;</span> <span class="n">front</span> <span class="n">in</span> <span class="n">Repr</span> <span class="o">&amp;&amp;</span> <span class="n">front</span><span class="p">.</span><span class="n">Repr</span> <span class="o">&lt;=</span> <span class="n">Repr</span> <span class="o">&amp;&amp;</span> <span class="n">front</span><span class="p">.</span><span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
<a name="l-24"></a>    <span class="n">rear</span> <span class="o">!=</span> <span class="k">null</span> <span class="o">&amp;&amp;</span> <span class="n">rear</span> <span class="n">in</span> <span class="n">Repr</span> <span class="o">&amp;&amp;</span> <span class="n">rear</span><span class="p">.</span><span class="n">Repr</span> <span class="o">&lt;=</span> <span class="n">Repr</span> <span class="o">&amp;&amp;</span> <span class="n">rear</span><span class="p">.</span><span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
<a name="l-25"></a>    <span class="o">|</span><span class="n">rear</span><span class="p">.</span><span class="n">List</span><span class="o">|</span> <span class="o">&lt;=</span> <span class="o">|</span><span class="n">front</span><span class="p">.</span><span class="n">List</span><span class="o">|</span> <span class="o">&amp;&amp;</span>
<a name="l-26"></a>    <span class="n">List</span> <span class="o">==</span> <span class="n">front</span><span class="p">.</span><span class="n">List</span> <span class="o">+</span> <span class="n">rear</span><span class="p">.</span><span class="n">ReverseSeq</span><span class="p">(</span><span class="n">rear</span><span class="p">.</span><span class="n">List</span><span class="p">)</span>
<a name="l-27"></a>  <span class="p">}</span>
<a name="l-28"></a>
<a name="l-29"></a>  <span class="n">method</span> <span class="n">Init</span><span class="p">()</span>
<a name="l-30"></a>    <span class="n">modifies</span> <span class="k">this</span><span class="p">;</span>
<a name="l-31"></a>    <span class="n">ensures</span> <span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">List</span> <span class="o">==</span> <span class="p">[];</span>
<a name="l-32"></a>  <span class="p">{</span>
<a name="l-33"></a>    <span class="n">front</span> <span class="o">:=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">.</span><span class="n">Init</span><span class="p">();</span>
<a name="l-34"></a>    <span class="n">rear</span> <span class="o">:=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">.</span><span class="n">Init</span><span class="p">();</span>
<a name="l-35"></a>    <span class="n">Repr</span> <span class="o">:=</span> <span class="p">{</span><span class="k">this</span><span class="p">};</span>
<a name="l-36"></a>    <span class="n">Repr</span> <span class="o">:=</span> <span class="n">Repr</span> <span class="o">+</span> <span class="n">front</span><span class="p">.</span><span class="n">Repr</span> <span class="o">+</span> <span class="n">rear</span><span class="p">.</span><span class="n">Repr</span><span class="p">;</span>
<a name="l-37"></a>    <span class="n">List</span> <span class="o">:=</span> <span class="p">[];</span>
<a name="l-38"></a>  <span class="p">}</span>
<a name="l-39"></a>
<a name="l-40"></a>  <span class="n">method</span> <span class="n">InitFromPieces</span><span class="p">(</span><span class="nl">f:</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">,</span> <span class="nl">r:</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">)</span>
<a name="l-41"></a>    <span class="n">requires</span> <span class="n">f</span> <span class="o">!=</span> <span class="k">null</span> <span class="o">&amp;&amp;</span> <span class="n">f</span><span class="p">.</span><span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">r</span> <span class="o">!=</span> <span class="k">null</span> <span class="o">&amp;&amp;</span> <span class="n">r</span><span class="p">.</span><span class="n">Valid</span><span class="p">();</span>
<a name="l-42"></a>    <span class="n">modifies</span> <span class="k">this</span><span class="p">;</span>
<a name="l-43"></a>    <span class="n">ensures</span> <span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">List</span> <span class="o">==</span> <span class="n">f</span><span class="p">.</span><span class="n">List</span> <span class="o">+</span> <span class="n">r</span><span class="p">.</span><span class="n">ReverseSeq</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">List</span><span class="p">);</span>
<a name="l-44"></a>  <span class="p">{</span>
<a name="l-45"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">length</span> <span class="o">&lt;=</span> <span class="n">f</span><span class="p">.</span><span class="n">length</span><span class="p">)</span> <span class="p">{</span>
<a name="l-46"></a>      <span class="n">front</span> <span class="o">:=</span> <span class="n">f</span><span class="p">;</span>
<a name="l-47"></a>      <span class="n">rear</span> <span class="o">:=</span> <span class="n">r</span><span class="p">;</span>
<a name="l-48"></a>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<a name="l-49"></a>      <span class="k">var</span> <span class="n">rr</span> <span class="o">:=</span> <span class="n">r</span><span class="p">.</span><span class="n">Reverse</span><span class="p">();</span>
<a name="l-50"></a>      <span class="k">var</span> <span class="n">ff</span> <span class="o">:=</span> <span class="n">f</span><span class="p">.</span><span class="n">Concat</span><span class="p">(</span><span class="n">rr</span><span class="p">);</span>
<a name="l-51"></a>      <span class="n">front</span> <span class="o">:=</span> <span class="n">ff</span><span class="p">;</span>
<a name="l-52"></a>
<a name="l-53"></a>      <span class="n">rear</span> <span class="o">:=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">.</span><span class="n">Init</span><span class="p">();</span>
<a name="l-54"></a>    <span class="p">}</span>
<a name="l-55"></a>    <span class="n">Repr</span> <span class="o">:=</span> <span class="p">{</span><span class="k">this</span><span class="p">};</span>
<a name="l-56"></a>    <span class="n">Repr</span> <span class="o">:=</span> <span class="n">Repr</span> <span class="o">+</span> <span class="n">front</span><span class="p">.</span><span class="n">Repr</span> <span class="o">+</span> <span class="n">rear</span><span class="p">.</span><span class="n">Repr</span><span class="p">;</span>
<a name="l-57"></a>    <span class="n">List</span> <span class="o">:=</span> <span class="n">front</span><span class="p">.</span><span class="n">List</span> <span class="o">+</span> <span class="n">rear</span><span class="p">.</span><span class="n">ReverseSeq</span><span class="p">(</span><span class="n">rear</span><span class="p">.</span><span class="n">List</span><span class="p">);</span>
<a name="l-58"></a>  <span class="p">}</span>
<a name="l-59"></a>
<a name="l-60"></a>  <span class="n">method</span> <span class="n">Front</span><span class="p">()</span> <span class="n">returns</span> <span class="p">(</span><span class="nl">t:</span> <span class="no">T</span><span class="p">)</span>
<a name="l-61"></a>    <span class="n">requires</span> <span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">List</span> <span class="o">!=</span> <span class="p">[];</span>
<a name="l-62"></a>    <span class="n">ensures</span> <span class="n">t</span> <span class="o">==</span> <span class="n">List</span><span class="p">[</span><span class="mh">0</span><span class="p">];</span>
<a name="l-63"></a>  <span class="p">{</span>
<a name="l-64"></a>    <span class="n">t</span> <span class="o">:=</span> <span class="n">front</span><span class="p">.</span><span class="n">head</span><span class="p">;</span>
<a name="l-65"></a>  <span class="p">}</span>
<a name="l-66"></a>
<a name="l-67"></a>  <span class="n">method</span> <span class="n">Tail</span><span class="p">()</span> <span class="n">returns</span> <span class="p">(</span><span class="nl">r:</span> <span class="n">AmortizedQueue</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">)</span>
<a name="l-68"></a>    <span class="n">requires</span> <span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">List</span> <span class="o">!=</span> <span class="p">[];</span>
<a name="l-69"></a>    <span class="n">ensures</span> <span class="n">r</span> <span class="o">!=</span> <span class="k">null</span> <span class="o">&amp;&amp;</span> <span class="n">r</span><span class="p">.</span><span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">r</span><span class="p">.</span><span class="n">List</span> <span class="o">==</span> <span class="n">List</span><span class="p">[</span><span class="mf">1.</span><span class="p">.];</span>
<a name="l-70"></a>  <span class="p">{</span>
<a name="l-71"></a>    <span class="n">r</span> <span class="o">:=</span> <span class="k">new</span> <span class="n">AmortizedQueue</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">.</span><span class="n">InitFromPieces</span><span class="p">(</span><span class="n">front</span><span class="p">.</span><span class="n">tail</span><span class="p">,</span> <span class="n">rear</span><span class="p">);</span>
<a name="l-72"></a>  <span class="p">}</span>
<a name="l-73"></a>
<a name="l-74"></a>  <span class="n">method</span> <span class="n">Enqueue</span><span class="p">(</span><span class="nl">item:</span> <span class="no">T</span><span class="p">)</span> <span class="n">returns</span> <span class="p">(</span><span class="nl">r:</span> <span class="n">AmortizedQueue</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">)</span>
<a name="l-75"></a>    <span class="n">requires</span> <span class="n">Valid</span><span class="p">();</span>
<a name="l-76"></a>    <span class="n">ensures</span> <span class="n">r</span> <span class="o">!=</span> <span class="k">null</span> <span class="o">&amp;&amp;</span> <span class="n">r</span><span class="p">.</span><span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">r</span><span class="p">.</span><span class="n">List</span> <span class="o">==</span> <span class="n">List</span> <span class="o">+</span> <span class="p">[</span><span class="n">item</span><span class="p">];</span>
<a name="l-77"></a>  <span class="p">{</span>
<a name="l-78"></a>    <span class="k">var</span> <span class="n">rr</span> <span class="o">:=</span> <span class="n">rear</span><span class="p">.</span><span class="n">Cons</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
<a name="l-79"></a>    <span class="n">r</span> <span class="o">:=</span> <span class="k">new</span> <span class="n">AmortizedQueue</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">.</span><span class="n">InitFromPieces</span><span class="p">(</span><span class="n">front</span><span class="p">,</span> <span class="n">rr</span><span class="p">);</span>
<a name="l-80"></a>  <span class="p">}</span>
<a name="l-81"></a><span class="p">}</span>
<a name="l-82"></a>
<a name="l-83"></a>
<a name="l-84"></a><span class="k">class</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="p">{</span>
<a name="l-85"></a>  <span class="k">var</span> <span class="nl">head:</span> <span class="no">T</span><span class="p">;</span>
<a name="l-86"></a>  <span class="k">var</span> <span class="nl">tail:</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">;</span>
<a name="l-87"></a>  <span class="k">var</span> <span class="nl">length:</span> <span class="k">int</span><span class="p">;</span>
<a name="l-88"></a>
<a name="l-89"></a>  <span class="n">ghost</span> <span class="k">var</span> <span class="nl">List:</span> <span class="n">seq</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">;</span>
<a name="l-90"></a>  <span class="n">ghost</span> <span class="k">var</span> <span class="nl">Repr:</span> <span class="n">set</span><span class="o">&lt;</span><span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;&gt;</span><span class="p">;</span>
<a name="l-91"></a>
<a name="l-92"></a>  <span class="k">function</span> <span class="n">Valid</span><span class="p">()</span><span class="o">:</span> <span class="n">bool</span>
<a name="l-93"></a>    <span class="n">reads</span> <span class="k">this</span><span class="p">,</span> <span class="n">Repr</span><span class="p">;</span>
<a name="l-94"></a>  <span class="p">{</span>
<a name="l-95"></a>    <span class="k">this</span> <span class="n">in</span> <span class="n">Repr</span> <span class="o">&amp;&amp;</span>
<a name="l-96"></a>    <span class="mh">0</span> <span class="o">&lt;=</span> <span class="n">length</span> <span class="o">&amp;&amp;</span> <span class="n">length</span> <span class="o">==</span> <span class="o">|</span><span class="n">List</span><span class="o">|</span> <span class="o">&amp;&amp;</span>
<a name="l-97"></a>    <span class="p">(</span><span class="n">length</span> <span class="o">==</span> <span class="mh">0</span> <span class="o">==&gt;</span> <span class="n">List</span> <span class="o">==</span> <span class="p">[]</span> <span class="o">&amp;&amp;</span> <span class="n">tail</span> <span class="o">==</span> <span class="k">null</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
<a name="l-98"></a>    <span class="p">(</span><span class="n">length</span> <span class="o">!=</span> <span class="mh">0</span> <span class="o">==&gt;</span>
<a name="l-99"></a>      <span class="n">tail</span> <span class="o">!=</span> <span class="k">null</span> <span class="o">&amp;&amp;</span> <span class="n">tail</span> <span class="n">in</span> <span class="n">Repr</span> <span class="o">&amp;&amp;</span>
<a name="l-100"></a>      <span class="n">tail</span><span class="p">.</span><span class="n">Repr</span> <span class="o">&lt;=</span> <span class="n">Repr</span> <span class="o">&amp;&amp;</span> <span class="k">this</span> <span class="o">!</span><span class="n">in</span> <span class="n">tail</span><span class="p">.</span><span class="n">Repr</span> <span class="o">&amp;&amp;</span>
<a name="l-101"></a>      <span class="n">tail</span><span class="p">.</span><span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span>
<a name="l-102"></a>      <span class="n">List</span> <span class="o">==</span> <span class="p">[</span><span class="n">head</span><span class="p">]</span> <span class="o">+</span> <span class="n">tail</span><span class="p">.</span><span class="n">List</span> <span class="o">&amp;&amp;</span>
<a name="l-103"></a>      <span class="n">length</span> <span class="o">==</span> <span class="n">tail</span><span class="p">.</span><span class="n">length</span> <span class="o">+</span> <span class="mh">1</span><span class="p">)</span>
<a name="l-104"></a>  <span class="p">}</span>
<a name="l-105"></a>
<a name="l-106"></a>  <span class="n">method</span> <span class="n">Init</span><span class="p">()</span>
<a name="l-107"></a>    <span class="n">modifies</span> <span class="k">this</span><span class="p">;</span>
<a name="l-108"></a>    <span class="n">ensures</span> <span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">List</span> <span class="o">==</span> <span class="p">[];</span>
<a name="l-109"></a>  <span class="p">{</span>
<a name="l-110"></a>    <span class="n">tail</span> <span class="o">:=</span> <span class="k">null</span><span class="p">;</span>
<a name="l-111"></a>    <span class="n">length</span> <span class="o">:=</span> <span class="mh">0</span><span class="p">;</span>
<a name="l-112"></a>    <span class="n">List</span> <span class="o">:=</span> <span class="p">[];</span>
<a name="l-113"></a>    <span class="n">Repr</span> <span class="o">:=</span> <span class="p">{</span><span class="k">this</span><span class="p">};</span>
<a name="l-114"></a>  <span class="p">}</span>
<a name="l-115"></a>
<a name="l-116"></a>  <span class="n">method</span> <span class="n">Cons</span><span class="p">(</span><span class="nl">d:</span> <span class="no">T</span><span class="p">)</span> <span class="n">returns</span> <span class="p">(</span><span class="nl">r:</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">)</span>
<a name="l-117"></a>    <span class="n">requires</span> <span class="n">Valid</span><span class="p">();</span>
<a name="l-118"></a>    <span class="n">ensures</span> <span class="n">r</span> <span class="o">!=</span> <span class="k">null</span> <span class="o">&amp;&amp;</span> <span class="n">r</span><span class="p">.</span><span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">r</span><span class="p">.</span><span class="n">List</span> <span class="o">==</span> <span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="o">+</span> <span class="n">List</span><span class="p">;</span>
<a name="l-119"></a>  <span class="p">{</span>
<a name="l-120"></a>    <span class="n">r</span> <span class="o">:=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">;</span>
<a name="l-121"></a>    <span class="n">r</span><span class="p">.</span><span class="n">head</span> <span class="o">:=</span> <span class="n">d</span><span class="p">;</span>
<a name="l-122"></a>    <span class="n">r</span><span class="p">.</span><span class="n">tail</span> <span class="o">:=</span> <span class="k">this</span><span class="p">;</span>
<a name="l-123"></a>    <span class="n">r</span><span class="p">.</span><span class="n">length</span> <span class="o">:=</span> <span class="n">length</span> <span class="o">+</span> <span class="mh">1</span><span class="p">;</span>
<a name="l-124"></a>    <span class="n">r</span><span class="p">.</span><span class="n">List</span> <span class="o">:=</span> <span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="o">+</span> <span class="n">List</span><span class="p">;</span>
<a name="l-125"></a>    <span class="n">r</span><span class="p">.</span><span class="n">Repr</span> <span class="o">:=</span> <span class="p">{</span><span class="n">r</span><span class="p">}</span> <span class="o">+</span> <span class="n">Repr</span><span class="p">;</span>
<a name="l-126"></a>  <span class="p">}</span>
<a name="l-127"></a>
<a name="l-128"></a>  <span class="n">method</span> <span class="n">Concat</span><span class="p">(</span><span class="k">end</span><span class="o">:</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">)</span> <span class="n">returns</span> <span class="p">(</span><span class="nl">r:</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">)</span>
<a name="l-129"></a>    <span class="n">requires</span> <span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="k">end</span> <span class="o">!=</span> <span class="k">null</span> <span class="o">&amp;&amp;</span> <span class="k">end</span><span class="p">.</span><span class="n">Valid</span><span class="p">();</span>
<a name="l-130"></a>    <span class="n">ensures</span> <span class="n">r</span> <span class="o">!=</span> <span class="k">null</span> <span class="o">&amp;&amp;</span> <span class="n">r</span><span class="p">.</span><span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">r</span><span class="p">.</span><span class="n">List</span> <span class="o">==</span> <span class="n">List</span> <span class="o">+</span> <span class="k">end</span><span class="p">.</span><span class="n">List</span><span class="p">;</span>
<a name="l-131"></a>    <span class="n">decreases</span> <span class="n">Repr</span><span class="p">;</span>
<a name="l-132"></a>  <span class="p">{</span>
<a name="l-133"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">length</span> <span class="o">==</span> <span class="mh">0</span><span class="p">)</span> <span class="p">{</span>
<a name="l-134"></a>      <span class="n">r</span> <span class="o">:=</span> <span class="k">end</span><span class="p">;</span>
<a name="l-135"></a>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<a name="l-136"></a>      <span class="k">var</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">tail</span><span class="p">.</span><span class="n">Concat</span><span class="p">(</span><span class="k">end</span><span class="p">);</span>
<a name="l-137"></a>      <span class="n">r</span> <span class="o">:=</span> <span class="n">c</span><span class="p">.</span><span class="n">Cons</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
<a name="l-138"></a>    <span class="p">}</span>
<a name="l-139"></a>  <span class="p">}</span>
<a name="l-140"></a>
<a name="l-141"></a>  <span class="n">method</span> <span class="n">Reverse</span><span class="p">()</span> <span class="n">returns</span> <span class="p">(</span><span class="nl">r:</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">)</span>
<a name="l-142"></a>    <span class="n">requires</span> <span class="n">Valid</span><span class="p">();</span>
<a name="l-143"></a>    <span class="n">ensures</span> <span class="n">r</span> <span class="o">!=</span> <span class="k">null</span> <span class="o">&amp;&amp;</span> <span class="n">r</span><span class="p">.</span><span class="n">Valid</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">|</span><span class="n">List</span><span class="o">|</span> <span class="o">==</span> <span class="o">|</span><span class="n">r</span><span class="p">.</span><span class="n">List</span><span class="o">|</span><span class="p">;</span>
<a name="l-144"></a>    <span class="n">ensures</span> <span class="p">(</span><span class="n">forall</span> <span class="n">k</span> <span class="o">::</span> <span class="mh">0</span> <span class="o">&lt;=</span> <span class="n">k</span> <span class="o">&amp;&amp;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="o">|</span><span class="n">List</span><span class="o">|</span> <span class="o">==&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">==</span> <span class="n">r</span><span class="p">.</span><span class="n">List</span><span class="p">[</span><span class="o">|</span><span class="n">List</span><span class="o">|-</span><span class="mh">1</span><span class="o">-</span><span class="n">k</span><span class="p">]);</span>
<a name="l-145"></a>    <span class="n">ensures</span> <span class="n">r</span><span class="p">.</span><span class="n">List</span> <span class="o">==</span> <span class="n">ReverseSeq</span><span class="p">(</span><span class="n">List</span><span class="p">);</span>
<a name="l-146"></a>    <span class="n">decreases</span> <span class="n">Repr</span><span class="p">;</span>
<a name="l-147"></a>  <span class="p">{</span>
<a name="l-148"></a>    <span class="k">if</span> <span class="p">(</span><span class="n">length</span> <span class="o">==</span> <span class="mh">0</span><span class="p">)</span> <span class="p">{</span>
<a name="l-149"></a>      <span class="n">r</span> <span class="o">:=</span> <span class="k">this</span><span class="p">;</span>
<a name="l-150"></a>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<a name="l-151"></a>      <span class="n">r</span> <span class="o">:=</span> <span class="n">tail</span><span class="p">.</span><span class="n">Reverse</span><span class="p">();</span>
<a name="l-152"></a>      <span class="k">var</span> <span class="n">e</span> <span class="o">:=</span> <span class="k">new</span> <span class="n">LinkedList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">.</span><span class="n">Init</span><span class="p">();</span>
<a name="l-153"></a>      <span class="n">e</span> <span class="o">:=</span> <span class="n">e</span><span class="p">.</span><span class="n">Cons</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
<a name="l-154"></a>      <span class="n">r</span> <span class="o">:=</span> <span class="n">r</span><span class="p">.</span><span class="n">Concat</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<a name="l-155"></a>    <span class="p">}</span>
<a name="l-156"></a>  <span class="p">}</span>
<a name="l-157"></a>
<a name="l-158"></a>  <span class="k">static</span> <span class="k">function</span> <span class="n">ReverseSeq</span><span class="p">(</span><span class="nl">s:</span> <span class="n">seq</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span><span class="p">)</span><span class="o">:</span> <span class="n">seq</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span>
<a name="l-159"></a>  <span class="p">{</span>
<a name="l-160"></a>    <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="p">[]</span> <span class="n">then</span> <span class="p">[]</span> <span class="k">else</span>
<a name="l-161"></a>    <span class="n">ReverseSeq</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mf">1.</span><span class="p">.])</span> <span class="o">+</span> <span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="mh">0</span><span class="p">]]</span>
<a name="l-162"></a>  <span class="p">}</span>
<a name="l-163"></a><span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
      </div>
    </div>
    <a href="https://searchcode.com/codesearch/view/28108492/#" class="back-to-top" style="display: inline;">Back to Top</a>
  
      <div class="footer">
          <p>
            </p><ul>
              <li><a href="https://searchcode.com/api/">API</a></li>
              <li><a href="https://searchcode.com/about/">About</a></li>
              <li><a href="https://searchcode.com/privacy/">Privacy</a></li>
              <li><a href="http://www.boyter.org/">Blog</a></li>
            </ul>
          <p></p>
          <p>searchcode is proudly Made in Sydney | © searchcode 2015</p>
          <p>
            </p><div id="stats">
            </div>
          <p></p>
      </div>
    </div> 
    
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23451493-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  

</body></html>